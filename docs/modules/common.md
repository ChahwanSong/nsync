# 모듈: common

## 책임

- 배치/결과 데이터 모델 정의
- JSON 직렬화/역직렬화 유틸 제공
- 로깅 구성 및 ID 생성

## 주요 구성 요소

- `Batch`: 배치 메타데이터(파일/디렉터리 수, 바이트 추정치)를 포함하는 데이터 클래스입니다.
- `BatchResult`: 워커 결과를 보관합니다.
- `json_dumps/json_loads`: ZeroMQ 메시지 직렬화/역직렬화에 사용합니다.
- `configure_logger`: 사람이 읽기 쉬운 포맷 로그를 기본으로 출력하며 로그 레벨/파일 출력 설정을 지원합니다.
- `new_task_id/new_worker_id`: 고유 식별자 생성에 사용합니다.

## task_id 정책

- `task_id`는 마스터가 배치를 큐에 넣는 시점에 1부터 순차 증가로 부여합니다.
- 단일 마스터 실행 내에서는 충돌/중복이 발생하지 않습니다.
- 마스터를 재시작하면 `task_id`는 다시 1부터 시작합니다.

## 결과 보관 제한

- 결과 보관 상한은 `nsync/constants.py`의 `MAX_RESULT_HISTORY`로 관리합니다.
